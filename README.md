# Dowhat ê¸°ì—… ì—°ê³„ í”„ë¡œì íŠ¸ 

---
## ğŸ¨ í”„ë¡œì íŠ¸ ì •ë³´ 

- **í”„ë¡œì íŠ¸ ëª…**: í˜¸í…” ìš´ì˜ íš¨ìœ¨í™” ë° AI CRM íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- **ì†Œì† ê¸°ê´€**: 2024 ì´ì–´ë“œë¦¼ìŠ¤ì¿¨ 4ê¸°  
- **ê°œë°œ ê¸°ê°„**: 2024.10.15. ~ 2024.11.22.
---
  
## ğŸ‘« NextLoopíŒ€ ì†Œê°œ 

![image](https://github.com/user-attachments/assets/734f6e3c-0487-4727-9635-38d13c266c37)

- **ëŠì„ì—†ëŠ” ë°œì „**  
   - 'Next'ëŠ” í•­ìƒ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë‚˜ì•„ê°€ëŠ” ê²ƒì„ ëœ»í•¨, ì´ëŠ” ê³„ì†í•´ì„œ ë” ë‚˜ì€ ì†”ë£¨ì…˜ê³¼ ê¸°ìˆ ì„ íƒêµ¬í•˜ê³  ë„ì „í•œë‹¤ëŠ” ì˜ë¯¸ë¥¼ ë‹´ê³  ìˆìŒ
     
- **ìˆœí™˜ì  ê°œì„ **  
   - 'Loop'ëŠ” í”„ë¡œê·¸ë˜ë°ì—ì„œ ë°˜ë³µì„ ëœ»í•¨, ì´ëŠ” ì½”ë“œë‚˜ ì œí’ˆì„ ì§€ì†ì ìœ¼ë¡œ ê°œì„ í•˜ê³  ìµœì í™”í•˜ëŠ” ê°œë°œ ê³¼ì •ì„ ìƒì§•í•¨.
     
- **ë¯¸ë˜ ì§€í–¥ì„±**  
   - ë³€í™”ì™€ ë°œì „ì„ ë©ˆì¶”ì§€ ì•Šê³ , í•­ìƒ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìƒê°í•˜ê³  ì¤€ë¹„í•˜ëŠ” ë¯¸ë˜ ì§€í–¥ì ì¸ íŒ€ì´ë¼ëŠ” ì´ë¯¸ì§€ë¥¼ ì „ë‹¬.

---

## ğŸ”” NextLoop Repository ë°©ë¬¸ íšŸìˆ˜ 

[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fminhyeok0328%2Fnext-loop&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false)](https://hits.seeyoufarm.com)



---
## ğŸ›  Stacks

- **Environment**: ![VS Code](https://img.shields.io/badge/Visual%20Studio%20Code-blue?logo=visual-studio-code&logoColor=white) ![Git](https://img.shields.io/badge/Git-orange?logo=git&logoColor=white) ![GitHub](https://img.shields.io/badge/GitHub-black?logo=github&logoColor=white)
- **Development**: ![Python](https://img.shields.io/badge/Python-3776AB?logo=python&logoColor=white) ![Docker](https://img.shields.io/badge/Docker-2496ED?logo=docker&logoColor=white) ![Airflow](https://img.shields.io/badge/Apache%20Airflow-017CEE?logo=apache-airflow&logoColor=white) ![Apache Spark](https://img.shields.io/badge/Apache%20Spark-E25A1C?logo=apache-spark&logoColor=white) ![FastAPI](https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white) ![MLflow](https://img.shields.io/badge/MLflow-0194E2?logo=mlflow&logoColor=white) ![Nginx](https://img.shields.io/badge/Nginx-009639?logo=nginx&logoColor=white) ![Prometheus](https://img.shields.io/badge/Prometheus-E6522C?logo=prometheus&logoColor=white) ![Grafana](https://img.shields.io/badge/Grafana-F46800?logo=grafana&logoColor=white)



- **Communication**: ![Slack](https://img.shields.io/badge/Slack-4A154B?logo=slack&logoColor=white) ![Notion](https://img.shields.io/badge/Notion-000000?logo=notion&logoColor=white)
 

---

## ğŸ”… ì£¼ìš” ê¸°ëŠ¥ 

- **ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬ì¶•**
   - ì œê³µë°›ì€ Dowhat ë°ì´í„°ë¥¼ GCSì— ì ì¬
   - ì£¼ ë‹¨ìœ„ë¡œ Airflow ë°°ì¹˜ íƒœìŠ¤í¬ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì¸ì…í•˜ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬í˜„
   - í˜„ì¬ëŠ” ë¡œì»¬ì—ì„œ Sparkë¥¼ ì‚¬ìš©, ì¶”í›„ ë°ì´í„° ê·œëª¨ê°€ ë§ì•„ì§ˆ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ì„œ Spark cluster êµ¬ì¶•í•´ ë‘ 

- **MLOps level 1 íŒŒì´í”„ë¼ì¸ êµ¬ì¶•**
   - ì œê³µë°›ì€ Dowhat ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬í•˜ì—¬ ê°„ë‹¨í•œ ì¶”ì²œ ëª¨ë¸ í•™ìŠµ
   - mlflowë¥¼ í†µí•´ ëª¨ë¸ ì‹¤í—˜ ê´€ë¦¬(Tracking), ëª¨ë¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ê¸°ëŠ¥ ì‚¬ìš©
   - FastAPIë¥¼ í†µí•´ ëª¨ë¸ ì„œë¹™ êµ¬í˜„
   - Github action, Nginxë¥¼ í™œìš©í•œ Blue-Green ë¬´ì¤‘ë‹¨ ë°°í¬ ë°©ì‹ì„ í†µí•´ CI/CD êµ¬í˜„
 
- **ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•**
   - Prometheus, Grafanaë¥¼ í†µí•´ ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° slack ì•ŒëŒ ì—°ë™
   - cAdvisor, prometheus Fastapi instrumentatorë¥¼ í†µí•´ ë©”íŠ¸ë¦­ ì •ë³´ ìˆ˜ì§‘
     

---
## ğŸ–¥ï¸ ê°œë°œ í™˜ê²½ ì„¤ì •

- **GCP ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©**
  - ë¦¬ì „: ì„œìš¸ (asia-northeast3-a) 
  - Image : Ubuntu 24.04.1 LTS(x86/64) ë‹¨, MLFlow ë“± ëª¨ë¸ í•™ìŠµ ì¸ìŠ¤í„´ìŠ¤ëŠ” Deep Learning VM with CUDA 12.3 M125
  - Instance Type :  E2.standard-4 (vcpu 4, ram 16gb)
  - Storage : ìµœì†Œ 100GB (ê· í˜• ìˆëŠ” ì˜êµ¬ ë””ìŠ¤í¬)

- **ê¸°íƒ€ ì£¼ì˜ì‚¬í•­**
  - ê° ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ì— í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ë§Œì„ ë„ì›Œì•¼ í•¨. 
    ë‹¤ë§Œ **Prometheus, Grafana**ê°™ì´ ë¶€í•˜ê°€ ë³„ë¡œ ì—†ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš° ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì— ë°°í¬í•˜ì—¬ë„ ìƒê´€ì—†ìŒ.
  - ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„ì€ **dowhat-{platform}-{number}** 
    ex) dowhat-monitoring-1   



---


## ğŸ–Š ì•„í‚¤í…ì²˜
- **ì „ì²´ ì•„í‚¤í…ì²˜** 
![image](https://github.com/user-attachments/assets/3dbbe9fb-90c4-4033-ab9b-769772fb8c1a)



- **íŒŒì´í”„ë¼ì¸ ìƒì„¸ êµ¬ì¡°**
ë°ì´í„° íŒŒì´í”„ë¼ì¸ì€ 4ê°œì˜ ì£¼ìš” ê³„ì¸µìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:


![image](https://github.com/user-attachments/assets/8da81757-4720-4548-bd5f-f1b66901de49)






### 1. Storage Layer (ì…ë ¥ ì €ì¥ì†Œ ê³„ì¸µ)
#### ë°ì´í„° ì†ŒìŠ¤:
- CSV íŒŒì¼ ì—…ë¡œë“œë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì…ë ¥ë°›ìŒ.
- GCS(Google Cloud Storage)ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒë„ ê°€ëŠ¥.

#### ì—­í• :
- ì›ì‹œ ë°ì´í„°ë¥¼ **Cloud Storage Bucket**ì— ì €ì¥.



### 2. Processing Layer (ë°ì´í„° ì²˜ë¦¬ ê³„ì¸µ)
- **Apache Spark**ë¥¼ ì‚¬ìš©í•˜ì—¬ 3ë‹¨ê³„ ë°ì´í„° ì²˜ë¦¬ ìˆ˜í–‰.

#### 3ë‹¨ê³„ ë°ì´í„° ì²˜ë¦¬:
1) **ë°ì´í„° ê²€ì¦ (Data Validation)**:
   - ë°ì´í„°ë¥¼ ê²€ì¦í•˜ê³  í’ˆì§ˆì„ í™•ì¸.
2) **ë³€í™˜ (Transformation)**:
   - í˜¸í…” ë„ë©”ì¸ì— ê¸°ë°˜í•œ feature ìƒì„± ë° ë°ì´í„° ì „ì²˜ë¦¬.
3) **í¬ë§· ë³€í™˜ (Format Convert)**:
   - ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥ ë° í™œìš©í•  ìˆ˜ ìˆë„ë¡ **Parquet í¬ë§·**ìœ¼ë¡œ ë³€í™˜.


## 3. Storage Layer (ì¶œë ¥ ì €ì¥ì†Œ ê³„ì¸µ)
- ìµœì¢… ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ feature storeì¸ **Cloud Storage Bucket**ì— ì €ì¥.
- Feature Storeì¸ feastë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì´ìœ ëŠ” ì¸í”„ë¼ êµ¬ì¶• ì´ˆê¸°ë‹¨ê³„ì´ê¸° ë•Œë¬¸ì— ìµœëŒ€í•œ ê°„ì†Œí™”í•˜ê¸°ë¡œ ê²°ì •.  

## 4. Consumption Layer (ì†Œë¹„ ê³„ì¸µ)
- ìµœì¢… ë°ì´í„°ëŠ” **ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸**ë“¤ì´ Feature Storeì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë¶„ì„ ë° ëª¨ë¸ í•™ìŠµ ë“±ì— í™œìš©.


- **mlops íŒŒì´í”„ë¼ì¸ ìƒì„¸ êµ¬ì¡°** 
![image](https://github.com/user-attachments/assets/15ea07f8-c0c0-4b92-95b2-355b674bc189)

---

